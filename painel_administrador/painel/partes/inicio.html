<div class="summary-cards">
    <div class="card">
        <h4>Total de Pedidos</h4>
        <p id="total-pedidos">15</p>
</div>
    </div>
    <div class="card">
        <h4>Total Faturado</h4>
        <p id="total-faturado">R$ 500,00</p>
    </div>
</div>

<div class="table-container">
    <div class="table-header">
        <h3>Pedidos Recentes</h3>
    </div>
    <table>
        <thead>
            <tr>
                <th>ID Pedido</th>
                <th>Cliente</th>
                <th>Valor</th>
                <th>Status</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>#123</td>
                <td>Jo√£o Nogueira</td>
                <td>R$ 45,50</td>
                <td>Entregue</td>
            </tr>
            <tr>
                <td>#122</td>
                <td>Mayara Vieira</td>
                <td>R$ 72,00</td>
                <td>Em preparo</td>
            </tr>
        </tbody>
    </table>
</div>

<script>
// Script para carregar dados din√¢micos da p√°gina inicial
console.log('üè† Inicializando p√°gina de dashboard...');

// Fun√ß√£o para carregar estat√≠sticas em tempo real
async function carregarEstatisticas() {
    try {
        console.log('üìä Carregando estat√≠sticas do servidor...');
        
        // Busca estat√≠sticas dos √∫ltimos 24h
        const response = await fetch('/api/estatisticas');
        
        if (!response.ok) {
            throw new Error(`Erro HTTP: ${response.status}`);
        }
        
        const stats = await response.json();
        console.log('üìà Estat√≠sticas recebidas:', stats);
        
        // Atualiza total de pedidos das √∫ltimas 24h
        const totalPedidosElement = document.getElementById('total-pedidos');
        if (totalPedidosElement) {
            totalPedidosElement.textContent = stats.pedidos_24h || '0';
        }
        
        // Atualiza total faturado das √∫ltimas 24h
        const totalFaturadoElement = document.getElementById('total-faturado');
        if (totalFaturadoElement) {
            const valorFormatado = formatarMoeda(stats.faturamento_24h || 0);
            totalFaturadoElement.textContent = valorFormatado;
        }
        
        console.log('‚úÖ Estat√≠sticas atualizadas na p√°gina');
        
    } catch (error) {
        console.error('‚ùå Erro ao carregar estat√≠sticas:', error);
        
        // Em caso de erro, mostra valores padr√£o e mensagem
        const totalPedidosElement = document.getElementById('total-pedidos');
        const totalFaturadoElement = document.getElementById('total-faturado');
        
        if (totalPedidosElement) {
            totalPedidosElement.textContent = '0';
            totalPedidosElement.title = 'Erro ao carregar dados';
        }
        
        if (totalFaturadoElement) {
            totalFaturadoElement.textContent = 'R$ 0,00';
            totalFaturadoElement.title = 'Erro ao carregar dados';
        }
    }
}

// Fun√ß√£o utilit√°ria para formatar valores monet√°rios
function formatarMoeda(valor) {
    return new Intl.NumberFormat('pt-BR', {
        style: 'currency',
        currency: 'BRL'
    }).format(valor);
}

// Executa o carregamento quando a p√°gina √© exibida
(function inicializarDashboard() {
    console.log('üöÄ Configurando dashboard inicial...');
    
    // Carrega estat√≠sticas imediatamente
    carregarEstatisticas();
    
    // Recarrega estat√≠sticas a cada 30 segundos para manter dados atualizados
    setInterval(carregarEstatisticas, 30000);
    
    console.log('‚úÖ Dashboard configurado com atualiza√ß√£o autom√°tica');
})();
</script>